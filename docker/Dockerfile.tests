FROM python:3.13-slim

COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

WORKDIR /app

COPY pyproject.toml ./
RUN uv pip install --system -r pyproject.toml && \
    uv pip install --system pytest pytest-asyncio

COPY src/ src/
COPY tests/ tests/

ENV POKEAPI_BASE_URL=https://pokeapi.co/api/v2

CMD ["pytest", "tests/", "-v"]
